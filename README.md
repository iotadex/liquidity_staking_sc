**Staking Contract**

The purpose of the contract is to allow people to deposit and lock (stake) a certain LP token for a predetermined duration of time and be rewarded with an amount of wSOON tokens that’s dependent on the length of time the LP tokens are locked and how many other people have staked.

**Steps:**

1. A user provides liquidity for one of the pairs above. I will use wSOON/wBTC in this example. The user then takes the wSOON/wBTC LP tokens they received for providing liquidity and “stake” them in the staking contract.
2. When they go to stake, they have a fill out a couple of prompts:
    1. They need to decide how many of their wSOON/wBTC LP tokens they’d like to stake (they can only stake that specific LP token. Other LP tokens would not work)
    2. They need to decide how long they would like to lock their LP tokens. This can be anywhere from 1 to 52 weeks. While the LP tokens are locked, the users cannot withdraw them from the system.
3. After the user has staked the LP tokens, they will begin receiving the weekly wSOON token rewards until their LP tokens are unlocked.
4. It’s important to note that the wSOON token rewards will need to be locked for 52 weeks after each weekly distribution. Basically these rewards must be vested for 1 year before they can be spent by the user.

**The Multiplier:**

If one user locks their LP tokens for 2 weeks while another user locks theirs for 52 weeks, the user with a longer locking period will receive more wSOON token rewards. This means that each specific time duration has a certain multiplier attached to it. To calculate the multiplier, you follow this formula:

```
Y = MX + B
Y = Multiplier
M = 1 / (52-1)
X = weeks staked/locked
B = 2 - M * 52
```

52 is simply the maximum amount of weeks LP tokens can be staked/locked.

This is to say if a user stakes for 1 week, then they get a multiplier of 1. If a user stakes for 26 weeks, then they get a multiplier of 1.49020. And if a user stakes for the maximum 52 weeks, then they get a multiplier of 2.

**Staked Value:**

The multiplier comes into effect when calculating staked value. The difference between the amount of LP tokens staked and the LP tokens staked value is the multiplier.

For example, if two users stake 10 LP tokens, but one user stakes for 1 week and the other stakes for 52 weeks, the one who staked for 52 weeks will receive double the wSOON reward amount during the weekly distribution.

```
Amount of LP tokens * Multiplier = Staked value
```

The weekly distribution amount in total is fixed and is determined by a 3 year schedule. Here’s a quick view on what that schedule looks like:

| Week 	  | Tokens  	      |
|--------	|---------------- |
|        1| 127,184.415786  |
|        2| 125,963.459629  |
|        3| 124,746.417744  |
|        4| 123,533.329878  |
|        5| 122,324.199901  |
|        6| 121,119.040813  |
|        7| 119,917.865739  |
|        8| 118,720.687939  |
|        9| 117,527.520804  |
|       10| 116,338.377860  |
|       11| 115,153.272773  |
|       12| 113,972.219346  |

If we use the example above, and only those 2 users were staking during the first weekly distribution, the user who only staked for 1 week would receive XXX and the user who staked for 52 weeks would receive XXX. Here are the formulas:

User 1 staked value: 10 * 1 = 10
User 2 staked value: 10 * 2 = 20
Total staked value: 10 + 20 = 30

User 1 proportion of the weekly distribution: 10 / 30 * 127,184.415786 = 42,394.805262
User 2 proportion of the weekly distribution: 20 / 30 * 127,184.415786 = 84,789.610524

# Development
Use following tasks to manage:

```shell
npx hardhat help
npx hardhat test
REPORT_GAS=true npx hardhat test
npx hardhat node
npx hardhat run scripts/deploy.ts
```
[2807602,2807603,2807604,2807605,2807606,2807607,2807608,2807609,2807610,2807611,2807612,2807613,2807614,2807615,2807616,2807617,2807618,2807619,2807620,2807621,2807622,2807623,2807624,2807625,2807626,2807627,2807628,2807629,2807630,2807631,2807632,2807633,2807634,2807635,2807636,2807637,2807638,2807639,2807640,2807641,2807642,2807643,2807644,2807645,2807646,2807647,2807648,2807649,2807650,2807651,2807652,2807653,2807654,2807655,2807656,2807657,2807658,2807659,2807660,2807661,2807662,2807663,2807664,2807665,2807666,2807667,2807668,2807669,2807670,2807671,2807672,2807673,2807674,2807675,2807676,2807677,2807678,2807679,2807680,2807681,2807682,2807683,2807684,2807685,2807686,2807687,2807688,2807689,2807690,2807691,2807692,2807693,2807694,2807695,2807696,2807697,2807698,2807699,2807700,2807701,2807702,2807703,2807704,2807705,2807706,2807707,2807708,2807709,2807710,2807711,2807712,2807713,2807714,2807715,2807716,2807717,2807718,2807719,2807720,2807721,2807722,2807723,2807724,2807725,2807726,2807727,2807728,2807729,2807730,2807731,2807732,2807733,2807734,2807735,2807736,2807737,2807738,2807739,2807740,2807741,2807742,2807743,2807744,2807745,2807746,2807747,2807748,2807749,2807750,2807751,2807752,2807753,2807754,2807755,2807756,2807757,2807758,2807759,2807760,2807761,2807762,2807763,2807764,2807765,2807766,2807767,2807768,2807769,2807770,2807771,2807772,2807773,2807774,2807775,2807776,2807777,2807778,2807779,2807780,2807781,2807782,2807783,2807784,2807785,2807786,2807787,2807788,2807789,2807790,2807791,2807792,2807793,2807794,2807795,2807796,2807797,2807798,2807799,2807800,2807801,2807802,2807803,2807804,2807805,2807806,2807807,2807808,2807809,2807810,2807811,2807812,2807813,2807814,2807815,2807816,2807817,2807818,2807819,2807820,2807821,2807822,2807823,2807824,2807825,2807826,2807827,2807828,2807829,2807830,2807831,2807832,2807833,2807834,2807835,2807836,2807837,2807838,2807839,2807840,2807841,2807842,2807843,2807844,2807845,2807846,2807847,2807848,2807849,2807850,2807851,2807852,2807853,2807854,2807855,2807856,2807857,2807858,2807859,2807860,2807861,2807862,2807863,2807864,2807865,2807866,2807867,2807868,2807869,2807870,2807871,2807872,2807873,2807874,2807875,2807876,2807877,2807878,2807879,2807880,2807881,2807882,2807883,2807884,2807885,2807886,2807887,2807888,2807889,2807890,2807891,2807892,2807893,2807894,2807895,2807896,2807897,2807898,2807899,2807900,2807901,2807902,2807903,2807904,2807905,2807906,2807907,2807908,2807909,2807910,2807911,2807912,2807913,2807914,2807915,2807916,2807917,2807918,2807919,2807920,2807921,2807922,2807923,2807924,2807925,2807926,2807927,2807928,2807929,2807930,2807931,2807932,2807933,2807934,2807935,2807936,2807937,2807938,2807939,2807940,2807941,2807942,2807943,2807944,2807945,2807946,2807947,2807948,2807949,2807950,2807951,2807952,2807953,2807954,2807955,2807956,2807957,2807958,2807959,2807960,2807961,2807962,2807963,2807964,2807965,2807966,2807967,2807968,2807969,2807970,2807971,2807972,2807973,2807974,2807975,2807976,2807977,2807978,2807979,2807980,2807981,2807982,2807983,2807984,2807985,2807986,2807987,2807988,2807989,2807990,2807991,2807992,2807993,2807994,2807995,2807996,2807997,2807998,2807999,2808000,2808001,2808002,2808003,2808004,2808005,2808006,2808007,2808008,2808009,2808010,2808011,2808012,2808013,2808014,2808015,2808016,2808017,2808018,2808019,2808020,2808021,2808022,2808023,2808024,2808025,2808026,2808027,2808028,2808029,2808030,2808031,2808032,2808033,2808034,2808035,2808036,2808037,2808038,2808039,2808040,2808041,2808042,2808043,2808044,2808045,2808046,2808047,2808048,2808049,2808050,2808051,2808052,2808053,2808054,2808055,2808056,2808057,2808058,2808059,2808060,2808061,2808062,2808063,2808064,2808065,2808066,2808067,2808068,2808069,2808070,2808071,2808072,2808073,2808074,2808075,2808076,2808077,2808078,2808079,2808080,2808081,2808082,2808083,2808084,2808085,2808086,2808087,2808088,2808089,2808090,2808091,2808092,2808093,2808094,2808095,2808096,2808097,2808098,2808099,2808100,2808101]
[10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000,10000000000000000000000]